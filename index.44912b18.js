!function(){var t,e,r,n,a={};function s(t,e,r){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return r}var o=new WeakSet;function i(){for(var t=0;t<4;t++)for(var e=0;e<2;e++){var r=this.board[e][t];this.board[e][t]=this.board[3-e][t],this.board[3-e][t]=r}}a=function(){var t;function e(t){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,e),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,o),o.add(this),this.board=t||[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle",this.previousState=JSON.parse(JSON.stringify(this.board))}return t=[{key:"moveLeft",value:function(){for(var t=this,e=!1,r=0;r<4;r++)!function(r){for(var n=t.board[r].filter(function(t){return 0!==t}),a=0;a<n.length-1;a++)n[a]===n[a+1]&&(n[a]*=2,t.score+=n[a],n[a+1]=0,e=!0);for(n=n.filter(function(t){return 0!==t});n.length<4;)n.push(0);e||t.board[r].every(function(t,e){return t===n[e]})||(e=!0),t.board[r]=n}(r);return e&&this.generateTile(),e}},{key:"moveRight",value:function(){this.board=this.board.map(function(t){return t.reverse()});var t=this.moveLeft();return this.board=this.board.map(function(t){return t.reverse()}),t}},{key:"moveUp",value:function(){for(var t=this,e=!1,r=0;r<4;r++)!function(r){for(var n=[],a=0;a<4;a++)0!==t.board[a][r]&&n.push(t.board[a][r]);for(var s=0;s<n.length-1;s++)n[s]===n[s+1]&&(n[s]*=2,t.score+=n[s],n[s+1]=0,e=!0);for(n=n.filter(function(t){return 0!==t});n.length<4;)n.push(0);for(var o=0;o<4;o++)t.board[o][r]!==n[o]&&(e=!0),t.board[o][r]=n[o]}(r);return e&&this.generateTile(),e}},{key:"moveDown",value:function(){s(this,o,i).call(this);var t=this.moveUp();return s(this,o,i).call(this),t}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return this.status}},{key:"isWinner",value:function(){this.board.some(function(t){return t.includes(2048)})&&(this.status="win")}},{key:"isGameOver",value:function(){if(this.board.some(function(t){return t.includes(0)}))return!1;for(var t=0;t<4;t++)for(var e=0;e<4;e++){var r=this.board[t][e];if(e<3&&r===this.board[t][e+1]||t<3&&r===this.board[t+1][e]||t<3&&r===this.board[t+1][e]||t>0&&r===this.board[t-1][e])return!1}return!0}},{key:"start",value:function(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="playing",this.generateTile(),this.generateTile()}},{key:"restart",value:function(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle"}},{key:"generateTile",value:function(){for(var t=[],e=0;e<4;e++)for(var r=0;r<4;r++)0===this.board[e][r]&&t.push({row:e,col:r});if(0!==t.length){var n=t[Math.floor(Math.random()*t.length)],a=n.row,s=n.col;this.board[a][s]=.9>Math.random()?2:4}}}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,t),e}(),t="/images/favicon.png",(e=document.createElement("link")).rel="icon",e.href=t,e.setAttribute("type","image/png"),(r=document.querySelector("link[rel='icon']"))&&document.head.removeChild(r),document.head.appendChild(e);var c=new((n=a)&&n.__esModule?n.default:n),u=document.querySelector(".button"),l=document.querySelector(".message-lose"),d=document.querySelector(".message-win"),f=document.querySelector(".message-start");function h(t){for(var e=t.getState(),r=document.querySelectorAll(".field-cell"),n=0;n<4;n++)for(var a=0;a<4;a++){var s=r[4*n+a];0===e[n][a]?(s.textContent="",s.className="field-cell"):(s.textContent=e[n][a],s.className="field-cell field-cell--".concat(e[n][a]))}var o=document.querySelector(".game-score"),i=t.getScore();o.innerHTML="",o.textContent=i}function v(t){l.classList.add("hidden"),d.classList.add("hidden"),f.classList.add("hidden"),"win"===t?d.classList.remove("hidden"):"lose"===t?l.classList.remove("hidden"):"start"===t&&f.classList.remove("hidden")}u.addEventListener("click",function(){u.classList.contains("start")?(c.start(),h(c),v(),u.classList.remove("start"),u.classList.add("restart"),u.textContent="Restart"):(c.restart(),h(c),u.classList.remove("restart"),u.classList.add("start"),u.textContent="Start",v("start"))}),document.addEventListener("keydown",function(t){if(!t.defaultPrevented&&"playing"===c.getStatus()){var e=!1;switch(t.key){case"ArrowLeft":e=c.moveLeft();break;case"ArrowRight":e=c.moveRight();break;case"ArrowUp":e=c.moveUp();break;case"ArrowDown":e=c.moveDown();break;default:return}if(e){if(h(c),u.classList.contains("start")&&(u.classList.remove("start"),u.classList.add("restart"),u.textContent="Restart"),c.isWinner()){v("win"),u.classList.remove("restart"),u.classList.add("start"),u.textContent="Start";return}if(c.isGameOver()){v("lose");return}}t.preventDefault()}})}();
//# sourceMappingURL=index.44912b18.js.map
